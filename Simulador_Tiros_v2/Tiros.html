<html>
   <head>
      <link rel="stylesheet" href="estilo.css">
   </head>
   
   
   <body onload="draw();">
      <div style="width:630; float: left; display:block">
      <canvas id="canvas" width="630" height="641" onclick="Disparar()" crossorigin="anonymous"></canvas>
	  </div>	  
	  
	  
      
	  <div style="display:none;">
         <audio id="audio" src="disparo_1.mp3" autoplay="false" ></audio>
         <img id="blanco" src="Blanco_Internacional_vacio.png" width="630" height="641">     
         <img id="bala1" src="bala1.png" width="33" height="30">     
         <img id="bala2" src="bala2.png" width="33" height="30">     
         <img id="bala3" src="bala3.png" width="33" height="30">
      </div>
	  
      <div id="div_Contenedor" style="width:500; text-align:left; float: right;">
		
         
         <div style="clear:both">
			
			<div class ="titulo" >
				<img src="logo-tirito.png" />
			</div>
			
            <div>
               <input id="txt_nombre" placeholder="Escriba su nombre"/>
            </div>
            <div>
               <select id="cbo_pais">
                  <option value=''>Seleccione su pais</option>
                  <option value='AFG'>Afghanistan</option>
                  <option value='ALB'>Albania</option>
                  <option value='DZA'>Algeria</option>
                  <option value='ASM'>American Samoa</option>
                  <option value='AND'>Andorra</option>
                  <option value='AGO'>Angola</option>
                  <option value='AIA'>Anguilla</option>
                  <option value='ATA'>Antarctica</option>
                  <option value='ATG'>Antigua and Barbuda</option>
                  <option value='ARG'>Argentina</option>
                  <option value='ARM'>Armenia</option>
                  <option value='ABW'>Aruba</option>
                  <option value='AUS'>Australia</option>
                  <option value='AUT'>Austria</option>
                  <option value='AZE'>Azerbaijan</option>
                  <option value='BHS'>Bahamas</option>
                  <option value='BHR'>Bahrain</option>
                  <option value='BGD'>Bangladesh</option>
                  <option value='BRB'>Barbados</option>
                  <option value='BLR'>Belarus</option>
                  <option value='BEL'>Belgium</option>
                  <option value='BLZ'>Belize</option>
                  <option value='BEN'>Benin</option>
                  <option value='BMU'>Bermuda</option>
                  <option value='BTN'>Bhutan</option>
                  <option value='BOL'>Bolivia, Plurinational State of</option>
                  <option value='BOL'>Bolivia</option>
                  <option value='BIH'>Bosnia and Herzegovina</option>
                  <option value='BWA'>Botswana</option>
                  <option value='BVT'>Bouvet Island</option>
                  <option value='BRA'>Brazil</option>
                  <option value='IOT'>British Indian Ocean Territory</option>
                  <option value='BRN'>Brunei Darussalam</option>
                  <option value='BRN'>Brunei</option>
                  <option value='BGR'>Bulgaria</option>
                  <option value='BFA'>Burkina Faso</option>
                  <option value='BDI'>Burundi</option>
                  <option value='KHM'>Cambodia</option>
                  <option value='CMR'>Cameroon</option>
                  <option value='CAN'>Canada</option>
                  <option value='CPV'>Cape Verde</option>
                  <option value='CYM'>Cayman Islands</option>
                  <option value='CAF'>Central African Republic</option>
                  <option value='TCD'>Chad</option>
                  <option value='CHL'>Chile</option>
                  <option value='CHN'>China</option>
                  <option value='CXR'>Christmas Island</option>
                  <option value='CCK'>Cocos (Keeling) Islands</option>
                  <option value='COL'>Colombia</option>
                  <option value='COM'>Comoros</option>
                  <option value='COG'>Congo</option>
                  <option value='COD'>Congo, the Democratic Republic of the</option>
                  <option value='COK'>Cook Islands</option>
                  <option value='CRI'>Costa Rica</option>
                  <option value='CIV'>Côte d'Ivoire</option>
                  <option value='CIV'>Ivory Coast</option>
                  <option value='HRV'>Croatia</option>
                  <option value='CUB'>Cuba</option>
                  <option value='CYP'>Cyprus</option>
                  <option value='CZE'>Czech Republic</option>
                  <option value='DNK'>Denmark</option>
                  <option value='DJI'>Djibouti</option>
                  <option value='DMA'>Dominica</option>
                  <option value='DOM'>Dominican Republic</option>
                  <option value='ECU'>Ecuador</option>
                  <option value='EGY'>Egypt</option>
                  <option value='SLV'>El Salvador</option>
                  <option value='GNQ'>Equatorial Guinea</option>
                  <option value='ERI'>Eritrea</option>
                  <option value='EST'>Estonia</option>
                  <option value='ETH'>Ethiopia</option>
                  <option value='FLK'>Falkland Islands (Malvinas)</option>
                  <option value='FRO'>Faroe Islands</option>
                  <option value='FJI'>Fiji</option>
                  <option value='FIN'>Finland</option>
                  <option value='FRA'>France</option>
                  <option value='GUF'>French Guiana</option>
                  <option value='PYF'>French Polynesia</option>
                  <option value='ATF'>French Southern Territories</option>
                  <option value='GAB'>Gabon</option>
                  <option value='GMB'>Gambia</option>
                  <option value='GEO'>Georgia</option>
                  <option value='DEU'>Germany</option>
                  <option value='GHA'>Ghana</option>
                  <option value='GIB'>Gibraltar</option>
                  <option value='GRC'>Greece</option>
                  <option value='GRL'>Greenland</option>
                  <option value='GRD'>Grenada</option>
                  <option value='GLP'>Guadeloupe</option>
                  <option value='GUM'>Guam</option>
                  <option value='GTM'>Guatemala</option>
                  <option value='GGY'>Guernsey</option>
                  <option value='GIN'>Guinea</option>
                  <option value='GNB'>Guinea-Bissau</option>
                  <option value='GUY'>Guyana</option>
                  <option value='HTI'>Haiti</option>
                  <option value='HMD'>Heard Island and McDonald Islands</option>
                  <option value='VAT'>Holy See (Vatican City State)</option>
                  <option value='HND'>Honduras</option>
                  <option value='HKG'>Hong Kong</option>
                  <option value='HUN'>Hungary</option>
                  <option value='ISL'>Iceland</option>
                  <option value='IND'>India</option>
                  <option value='IDN'>Indonesia</option>
                  <option value='IRN'>Iran, Islamic Republic of</option>
                  <option value='IRQ'>Iraq</option>
                  <option value='IRL'>Ireland</option>
                  <option value='IMN'>Isle of Man</option>
                  <option value='ISR'>Israel</option>
                  <option value='ITA'>Italy</option>
                  <option value='JAM'>Jamaica</option>
                  <option value='JPN'>Japan</option>
                  <option value='JEY'>Jersey</option>
                  <option value='JOR'>Jordan</option>
                  <option value='KAZ'>Kazakhstan</option>
                  <option value='KEN'>Kenya</option>
                  <option value='KIR'>Kiribati</option>
                  <option value='PRK'>Korea, Democratic People's Republic of</option>
                  <option value='KOR'>Korea, Republic of</option>
                  <option value='KOR'>South Korea</option>
                  <option value='KWT'>Kuwait</option>
                  <option value='KGZ'>Kyrgyzstan</option>
                  <option value='LAO'>Lao People's Democratic Republic</option>
                  <option value='LVA'>Latvia</option>
                  <option value='LBN'>Lebanon</option>
                  <option value='LSO'>Lesotho</option>
                  <option value='LBR'>Liberia</option>
                  <option value='LBY'>Libyan Arab Jamahiriya</option>
                  <option value='LBY'>Libya</option>
                  <option value='LIE'>Liechtenstein</option>
                  <option value='LTU'>Lithuania</option>
                  <option value='LUX'>Luxembourg</option>
                  <option value='MAC'>Macao</option>
                  <option value='MKD'>Macedonia, the former Yugoslav Republic of</option>
                  <option value='MDG'>Madagascar</option>
                  <option value='MWI'>Malawi</option>
                  <option value='MYS'>Malaysia</option>
                  <option value='MDV'>Maldives</option>
                  <option value='MLI'>Mali</option>
                  <option value='MLT'>Malta</option>
                  <option value='MHL'>Marshall Islands</option>
                  <option value='MTQ'>Martinique</option>
                  <option value='MRT'>Mauritania</option>
                  <option value='MUS'>Mauritius</option>
                  <option value='MYT'>Mayotte</option>
                  <option value='MEX'>Mexico</option>
                  <option value='FSM'>Micronesia, Federated States of</option>
                  <option value='MDA'>Moldova, Republic of</option>
                  <option value='MCO'>Monaco</option>
                  <option value='MNG'>Mongolia</option>
                  <option value='MNE'>Montenegro</option>
                  <option value='MSR'>Montserrat</option>
                  <option value='MAR'>Morocco</option>
                  <option value='MOZ'>Mozambique</option>
                  <option value='MMR'>Myanmar</option>
                  <option value='MMR'>Burma</option>
                  <option value='NAM'>Namibia</option>
                  <option value='NRU'>Nauru</option>
                  <option value='NPL'>Nepal</option>
                  <option value='NLD'>Netherlands</option>
                  <option value='ANT'>Netherlands Antilles</option>
                  <option value='NCL'>New Caledonia</option>
                  <option value='NZL'>New Zealand</option>
                  <option value='NIC'>Nicaragua</option>
                  <option value='NER'>Niger</option>
                  <option value='NGA'>Nigeria</option>
                  <option value='NIU'>Niue</option>
                  <option value='NFK'>Norfolk Island</option>
                  <option value='MNP'>Northern Mariana Islands</option>
                  <option value='NOR'>Norway</option>
                  <option value='OMN'>Oman</option>
                  <option value='PAK'>Pakistan</option>
                  <option value='PLW'>Palau</option>
                  <option value='PSE'>Palestinian Territory, Occupied</option>
                  <option value='PAN'>Panama</option>
                  <option value='PNG'>Papua New Guinea</option>
                  <option value='PRY'>Paraguay</option>
                  <option value='PER'>Peru</option>
                  <option value='PHL'>Philippines</option>
                  <option value='PCN'>Pitcairn</option>
                  <option value='POL'>Poland</option>
                  <option value='PRT'>Portugal</option>
                  <option value='PRI'>Puerto Rico</option>
                  <option value='QAT'>Qatar</option>
                  <option value='REU'>Réunion</option>
                  <option value='ROU'>Romania</option>
                  <option value='RUS'>Russian Federation</option>
                  <option value='RUS'>Russia</option>
                  <option value='RWA'>Rwanda</option>
                  <option value='SHN'>Saint Helena, Ascension and Tristan da Cunha</option>
                  <option value='KNA'>Saint Kitts and Nevis</option>
                  <option value='LCA'>Saint Lucia</option>
                  <option value='SPM'>Saint Pierre and Miquelon</option>
                  <option value='VCT'>Saint Vincent and the Grenadines</option>
                  <option value='VCT'>Saint Vincent & the Grenadines</option>
                  <option value='VCT'>St. Vincent and the Grenadines</option>
                  <option value='WSM'>Samoa</option>
                  <option value='SMR'>San Marino</option>
                  <option value='STP'>Sao Tome and Principe</option>
                  <option value='SAU'>Saudi Arabia</option>
                  <option value='SEN'>Senegal</option>
                  <option value='SRB'>Serbia</option>
                  <option value='SYC'>Seychelles</option>
                  <option value='SLE'>Sierra Leone</option>
                  <option value='SGP'>Singapore</option>
                  <option value='SVK'>Slovakia</option>
                  <option value='SVN'>Slovenia</option>
                  <option value='SLB'>Solomon Islands</option>
                  <option value='SOM'>Somalia</option>
                  <option value='ZAF'>South Africa</option>
                  <option value='SGS'>South Georgia and the South Sandwich Islands</option>
                  <option value='SSD'>South Sudan</option>
                  <option value='ESP'>Spain</option>
                  <option value='LKA'>Sri Lanka</option>
                  <option value='SDN'>Sudan</option>
                  <option value='SUR'>Suriname</option>
                  <option value='SJM'>Svalbard and Jan Mayen</option>
                  <option value='SWZ'>Swaziland</option>
                  <option value='SWE'>Sweden</option>
                  <option value='CHE'>Switzerland</option>
                  <option value='SYR'>Syrian Arab Republic</option>
                  <option value='TWN'>Taiwan, Province of China</option>
                  <option value='TWN'>Taiwan</option>
                  <option value='TJK'>Tajikistan</option>
                  <option value='TZA'>Tanzania, United Republic of</option>
                  <option value='THA'>Thailand</option>
                  <option value='TLS'>Timor-Leste</option>
                  <option value='TGO'>Togo</option>
                  <option value='TKL'>Tokelau</option>
                  <option value='TON'>Tonga</option>
                  <option value='TTO'>Trinidad and Tobago</option>
                  <option value='TUN'>Tunisia</option>
                  <option value='TUR'>Turkey</option>
                  <option value='TKM'>Turkmenistan</option>
                  <option value='TCA'>Turks and Caicos Islands</option>
                  <option value='TUV'>Tuvalu</option>
                  <option value='UGA'>Uganda</option>
                  <option value='UKR'>Ukraine</option>
                  <option value='ARE'>United Arab Emirates</option>
                  <option value='GBR'>United Kingdom</option>
                  <option value='USA'>United States</option>
                  <option value='UMI'>United States Minor Outlying Islands</option>
                  <option value='URY'>Uruguay</option>
                  <option value='UZB'>Uzbekistan</option>
                  <option value='VUT'>Vanuatu</option>
                  <option value='VEN'>Venezuela, Bolivarian Republic of</option>
                  <option value='VEN'>Venezuela</option>
                  <option value='VNM'>Viet Nam</option>
                  <option value='VNM'>Vietnam</option>
                  <option value='VGB'>Virgin Islands, British</option>
                  <option value='VIR'>Virgin Islands, U.S.</option>
                  <option value='WLF'>Wallis and Futuna</option>
                  <option value='ESH'>Western Sahara</option>
                  <option value='YEM'>Yemen</option>
                  <option value='ZMB'>Zambia</option>
                  <option value='ZWE'>Zimbabwe</option>
               </select>
            </div>
         </div>
         <div style="clear:both">
            <img src="img_balas.png" width="100" style="vertical-align: bottom;"><span id="ContadorBalas" style="font-size:60px"></span>
         </div>
         
         <div style="clear:both">
            <a class="btn_Nuevo" onclick="Nuevo();">Nuevo Blanco</a>
         </div>
		 <div id="div_Botones" style="text-align:left; padding-bottom:20px; margin-top:20px;"></div>
      </div>
   </body>
</html>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
<script>
   var img = new Image();   // Create new img element
   img.setAttribute('crossOrigin', 'anonymous'); 
   var canvas = document.getElementById('canvas');
   var ctx = canvas.getContext('2d');
   var CantBalas = 5;
   var ContadorBalas = CantBalas;
   
   
   function randomInt(min, max) {
   	return min + Math.floor((max - min) * Math.random());
   }
   
   function draw() {
     // Dibujar Blanco
     ctx.drawImage(document.getElementById('blanco'), 0, 0);
   }
   
   function Disparar(){
   	if (ContadorBalas > 0){
   	var disparo_sonido = new Audio('disparo_1.mp3');
   	var bala_piso = new Audio('bala_piso.mp3');
   	var x = event.clientX;     // Get the horizontal coordinate
   	var y = event.clientY;     // Get the vertical coordinate
   	var coor = "X coords: " + x + ", Y coords: " + y;
   	var n_bala = randomInt( 1, 4);
   	disparo_sonido.play();
   	bala_piso.play();
   	
   	// Dibujar Bala
   		
   	//ctx.drawImage(document.getElementById('bala' + n_bala), x-23, y-23, 33, 30);
   	ctx.drawImage(document.getElementById('bala' + n_bala), x-18, y-16, 20, 20-3);
   	//ctx.drawImage(document.getElementById('bala' + n_bala), x-18, y-16, 20, 17);
   	ContadorBalas = ContadorBalas -1;
   	ActualizarBalas();
   	}
   	else{
   		var disparo_sin_balas = new Audio('sin_balas.mp3');
   		disparo_sin_balas.play();
   	}
   }
   
   var link = document.createElement('a');
   	link.className = "btn_Guardar";
       link.innerHTML = 'Enviar Blanco';
   	
   	link.addEventListener('click', function(ev) {
   		//link.href = canvas.toDataURL();
   		//link.download = "download.png";
   		
   		if ($("#txt_nombre").val() == "" || $("#cbo_pais").val() == ""){
   			alert("Debe ingresar un nombre y/o seleccionar un pais");
   			return;
   		}
   		else{
   $.ajax({
	   type: 'POST',
	   url: 'http://localhost:3000/cargarImagenes',
	   data: {
			id: $("#txt_nombre").val(),
			pais: $("#cbo_pais").val(),
			imagen: canvas.toDataURL()
	   },
	   success: function(data){
		 alert("La imagen fue enviada correctamente");
	   }
   })
   alert("Datos enviados correctamente!");
   		
   	}}, false);
   	
   document.getElementById("div_Botones").appendChild(link);
   
   function ActualizarBalas(){
   	document.getElementById("ContadorBalas").innerHTML = ContadorBalas;
   }
   
   function Recargar(){
   		var arma_recargar = new Audio('arma_recargar.mp3');
   		arma_recargar.play();
   		ContadorBalas = CantBalas;
   		ActualizarBalas();
   }
   
   function Nuevo(){
   	location.reload();
   }
   
   ActualizarBalas();
   
</script>